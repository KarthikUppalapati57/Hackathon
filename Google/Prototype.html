<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personalized Career Advisor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .page { display: none; }
        .page.active { display: block; }
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: #4f46e5;
            animation: spin 1s ease infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .sound-wave {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100px;
        }
        .sound-wave span {
            display: block;
            width: 5px;
            height: 10px;
            background: #4f46e5;
            margin: 0 4px;
            border-radius: 5px;
            animation: sound 1.2s ease-in-out infinite;
        }
        .sound-wave span:nth-child(1) { animation-delay: 0.2s; }
        .sound-wave span:nth-child(2) { animation-delay: 0.4s; }
        .sound-wave span:nth-child(3) { animation-delay: 0.6s; }
        .sound-wave span:nth-child(4) { animation-delay: 0.8s; }
        .sound-wave span:nth-child(5) { animation-delay: 1s; }

        @keyframes sound {
            0%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(5); }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Navbar -->
    <nav id="navbar" class="bg-white shadow-md sticky top-0 z-50 hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 cursor-pointer" onclick="navigateTo('dashboard')">
                        <svg class="h-8 w-8 text-indigo-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.562L16.25 22.5l-.648-1.938a3.375 3.375 0 00-2.456-2.456L11.25 18l1.938-.648a3.375 3.375 0 002.456-2.456L16.25 13l.648 1.938a3.375 3.375 0 002.456 2.456L21 18l-1.938.648a3.375 3.375 0 00-2.456 2.456z" />
                        </svg>
                    </div>
                    <div class="hidden md:block">
                        <div id="nav-links" class="ml-10 flex items-baseline space-x-4">
                            <a onclick="navigateTo('dashboard')" class="text-gray-600 hover:bg-indigo-600 hover:text-white px-3 py-2 rounded-md text-sm font-medium cursor-pointer">Dashboard</a>
                            <a onclick="navigateTo('advisor')" class="text-gray-600 hover:bg-indigo-600 hover:text-white px-3 py-2 rounded-md text-sm font-medium cursor-pointer">Career Advisor</a>
                            <a onclick="navigateTo('resume')" class="text-gray-600 hover:bg-indigo-600 hover:text-white px-3 py-2 rounded-md text-sm font-medium cursor-pointer">Resume Tracker</a>
                            <a onclick="navigateTo('mentor')" class="text-gray-600 hover:bg-indigo-600 hover:text-white px-3 py-2 rounded-md text-sm font-medium cursor-pointer">AI Mentor</a>
                        </div>
                    </div>
                </div>
                <div>
                     <button onclick="handleSignOut()" class="bg-indigo-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-indigo-700">
                        Sign Out
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <main id="app" class="p-4 sm:p-6 md:p-8">
        <!-- Login/Signup Page -->
        <div id="home-page" class="page active">
             <div class="flex flex-col items-center justify-center min-h-[calc(100vh-4rem)]">
                <div class="max-w-4xl text-center">
                    <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold text-gray-900">
                        Your Personal AI-Powered <span class="text-indigo-600">Career Co-Pilot</span>
                    </h1>
                    <p class="mt-4 text-lg text-gray-600">
                        Navigate your career path with confidence. Get personalized advice, discover your skills, and connect with mentors in any language.
                    </p>
                </div>
                <div class="mt-10 w-full max-w-md bg-white p-8 rounded-2xl shadow-lg">
                    <h2 id="auth-title" class="text-2xl font-bold text-center mb-4">Welcome Back</h2>
                    <p id="auth-error" class="text-red-500 text-sm mb-4 text-center"></p>
                    <form onsubmit="handleAuth(event)">
                         <div class="mb-4" id="name-field-container" style="display: none;">
                            <label class="block text-gray-700 text-sm font-bold mb-2" for="name">Full Name</label>
                            <input type="text" id="name" class="shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500" />
                        </div>
                        <div class="mb-4">
                            <label class="block text-gray-700 text-sm font-bold mb-2" for="email">Email</label>
                            <input type="email" id="email" class="shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500" required />
                        </div>
                        <div class="mb-6">
                            <label class="block text-gray-700 text-sm font-bold mb-2" for="password">Password</label>
                            <input type="password" id="password" class="shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500" required />
                        </div>
                        <button id="auth-button" type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:shadow-outline">
                            Sign In
                        </button>
                    </form>
                    <p class="text-center text-sm text-gray-600 mt-6">
                        <span id="auth-toggle-text">Don't have an account?</span>
                        <a onclick="toggleAuthMode()" class="font-bold text-indigo-600 hover:text-indigo-800 ml-1 cursor-pointer">
                           <span id="auth-toggle-link">Sign Up</span>
                        </a>
                    </p>
                </div>
            </div>
        </div>

        <!-- Profile Setup Page -->
        <div id="profile-page" class="page">
             <div class="max-w-2xl mx-auto bg-white p-8 rounded-2xl shadow-lg animate-fade-in">
                <h1 class="text-3xl font-bold mb-2">Welcome! Let's set up your profile.</h1>
                <p class="text-gray-600 mb-6">This information will help us personalize your career advice.</p>
                <form onsubmit="saveProfile(event)">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-2">Full Name</label>
                            <input id="fullName" type="text" placeholder="e.g., Karthik Uppalapati" class="shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700">
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-2">Highest Education Level</label>
                            <input id="educationLevel" type="text" placeholder="e.g., Bachelor's Degree" class="shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700" value="Bachelor of Technology">
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-2">Field of Study</label>
                            <input id="fieldOfStudy" type="text" placeholder="e.g., Computer Science" class="shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700" value="Computer Science">
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-2">Your Interests</label>
                            <input id="interests" type="text" placeholder="e.g., AI, Gaming, Sustainability" class="shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700" value="Artificial Intelligence, Web Development, Solving complex puzzles">
                        </div>
                    </div>
                    <div class="mt-6">
                        <label class="block text-gray-700 text-sm font-bold mb-2">Your Skills</label>
                        <textarea id="skills" placeholder="e.g., Python, React, Public Speaking" class="shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 h-24">Python, JavaScript, React, Node.js, SQL, Problem Solving</textarea>
                    </div>
                    <div class="mt-6">
                        <label class="block text-gray-700 text-sm font-bold mb-2">Career Aspirations</label>
                        <textarea id="careerAspirations" placeholder="e.g., A role in tech that allows creative problem-solving" class="shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 h-24">I want to become a full-stack developer at a product-based company, focusing on creating scalable and user-friendly web applications.</textarea>
                    </div>
                    <div class="mt-8">
                        <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg">
                            Save Profile & Continue
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div id="dashboard-page" class="page">
            <div class="max-w-7xl mx-auto">
                <h1 class="text-3xl font-bold text-gray-900">Welcome back, <span id="dashboard-username">User</span>!</h1>
                <p class="mt-2 text-lg text-gray-600">What would you like to do today?</p>
                <div class="mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div onclick="navigateTo('advisor')" class="bg-white p-6 rounded-2xl shadow-lg hover:shadow-xl transition-shadow duration-300 cursor-pointer">
                        <div class="flex items-center justify-center h-12 w-12 rounded-xl bg-indigo-500 text-white"><svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4" /></svg></div>
                        <h3 class="mt-4 text-lg font-semibold">Personalized Career Advisor</h3>
                        <p class="mt-2 text-base text-gray-500">Get AI-powered career recommendations.</p>
                    </div>
                    <div onclick="navigateTo('resume')" class="bg-white p-6 rounded-2xl shadow-lg hover:shadow-xl transition-shadow duration-300 cursor-pointer">
                        <div class="flex items-center justify-center h-12 w-12 rounded-xl bg-green-500 text-white"><svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg></div>
                        <h3 class="mt-4 text-lg font-semibold">ATS Resume Tracker</h3>
                        <p class="mt-2 text-base text-gray-500">Analyze your resume against job descriptions.</p>
                    </div>
                    <div onclick="navigateTo('mentor')" class="bg-white p-6 rounded-2xl shadow-lg hover:shadow-xl transition-shadow duration-300 cursor-pointer">
                        <div class="flex items-center justify-center h-12 w-12 rounded-xl bg-sky-500 text-white"><svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a2 2 0 01-2-2V4a2 2 0 012-2h8a2 2 0 012 2v4z" /></svg></div>
                        <h3 class="mt-4 text-lg font-semibold">AI Mentor</h3>
                        <p class="mt-2 text-base text-gray-500">Chat with your AI mentor via text, audio, or video.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Career Advisor Page -->
        <div id="advisor-page" class="page">
             <div class="max-w-4xl mx-auto text-center">
                <h1 class="text-3xl font-bold">Personalized Career Advisor</h1>
                <p class="text-gray-600 mt-2" id="advisor-subtitle">How would you like to start your advisory session?</p>
                
                <div id="advisor-choice" class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
                   <div onclick="startCareerAdvisor('chat')" class="p-6 bg-white rounded-2xl shadow-lg hover:shadow-xl transition-shadow cursor-pointer">
                        <div class="flex items-center justify-center h-16 w-16 rounded-xl bg-indigo-500 text-white mx-auto"><svg class="h-8 w-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg></div>
                        <h3 class="mt-4 text-lg font-semibold">Chat Session</h3>
                        <p class="mt-1 text-sm text-gray-500">A detailed, text-based conversation.</p>
                   </div>
                   <div onclick="startCareerAdvisor('audio')" class="p-6 bg-white rounded-2xl shadow-lg hover:shadow-xl transition-shadow cursor-pointer">
                        <div class="flex items-center justify-center h-16 w-16 rounded-xl bg-green-500 text-white mx-auto"><svg class="h-8 w-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path></svg></div>
                        <h3 class="mt-4 text-lg font-semibold">Audio Session</h3>
                        <p class="mt-1 text-sm text-gray-500">A voice conversation with the AI Advisor.</p>
                   </div>
                   <div onclick="startCareerAdvisor('video')" class="p-6 bg-white rounded-2xl shadow-lg hover:shadow-xl transition-shadow cursor-pointer">
                        <div class="flex items-center justify-center h-16 w-16 rounded-xl bg-sky-500 text-white mx-auto"><svg class="h-8 w-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></div>
                        <h3 class="mt-4 text-lg font-semibold">Video Session</h3>
                        <p class="mt-1 text-sm text-gray-500">An interactive video session with an AI avatar.</p>
                   </div>
                </div>

                <!-- Career Advisor Interaction Views -->
                <div id="advisor-chat-view" class="hidden mt-8 text-left">
                     <div class="bg-white p-6 rounded-2xl shadow-lg">
                         <div id="advisor-chat-box" class="space-y-4 h-96 overflow-y-auto p-4 border rounded-lg"></div>
                         <form class="mt-4 flex space-x-2" onsubmit="handleAdvisorConversation(event)">
                            <input id="advisor-chat-input" type="text" class="flex-1 shadow appearance-none border rounded-lg w-full py-2 px-3" placeholder="Type your answer...">
                            <button type="submit" id="advisor-chat-send-btn" class="bg-indigo-600 text-white font-bold p-3 rounded-lg hover:bg-indigo-700">Send</button>
                        </form>
                    </div>
                     <button onclick="endCareerAdvisorSession()" class="mt-4 text-sm text-gray-500 hover:text-gray-700">&larr; Back to choices</button>
                     <input type="file" id="advisor-resume-upload-hidden" class="hidden" onchange="handleAdvisorResumeFile(event)">
                </div>

                <div id="advisor-audio-view" class="hidden mt-8">
                     <div class="bg-white p-8 rounded-2xl shadow-lg">
                        <p class="text-gray-600">Audio Session with Career Advisor</p>
                        <div class="sound-wave my-8">
                            <span></span><span></span><span></span><span></span><span></span>
                        </div>
                        <p class="font-medium" id="ai-audio-status-advisor">AI Advisor is speaking...</p>
                        <button onclick="endCareerAdvisorSession()" class="mt-8 bg-red-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-red-600">End Session</button>
                    </div>
                </div>

                <div id="advisor-video-view" class="hidden mt-8">
                    <div class="bg-white p-6 rounded-2xl shadow-lg relative">
                        <div class="bg-gray-900 rounded-lg aspect-video flex items-center justify-center">
                            <img src="https://placehold.co/600x400/1A202C/FFFFFF?text=AI+Advisor" alt="AI Advisor Avatar" class="w-1/3 rounded-full">
                        </div>
                        <div class="absolute w-40 h-auto aspect-video bg-gray-700 bottom-8 right-8 rounded-lg border-2 border-white flex items-center justify-center text-white text-sm">
                            Your Camera
                        </div>
                         <div class="mt-4 flex justify-center items-center space-x-4">
                            <button onclick="endCareerAdvisorSession()" class="bg-red-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-red-600">End Session</button>
                         </div>
                    </div>
                </div>

                 <div id="rec-loader" class="mt-8 hidden items-center space-x-3 justify-center">
                    <div class="spinner"></div>
                    <p>Crafting your personalized career plan...</p>
                </div>
                <div id="rec-results" class="mt-8 space-y-6 text-left"></div>

            </div>
        </div>

        <!-- Resume Tracker Page -->
        <div id="resume-page" class="page">
           <!-- ... same as before ... -->
        </div>
        
        <!-- AI Mentor Page -->
        <div id="mentor-page" class="page">
             <!-- ... same as before ... -->
        </div>
        
    </main>

    <script>
        // --- State Management ---
        const state = {
            isLoggedIn: false,
            isLoginMode: true,
            currentPage: 'home',
            userProfile: null,
            advisorConversationState: {
                step: 0,
                questions: [
                    "Great, I've reviewed your resume. Now, to personalize my advice, I have a few questions. First, beyond what's on your resume, what's a subject or activity you're passionate about, even if it's just a hobby?",
                    "That's fascinating! And when you picture your ideal job, what's more important to you: a high salary, work-life balance, or the opportunity to work on cutting-edge technology?",
                    "Understood. One last question. What is one skill you'd be most excited to learn in the next year?",
                    "Thank you for sharing that. Based on everything you've told me, I'm analyzing the best career paths for you. Please wait a moment."
                ],
                answers: []
            }
        };
        
        // --- Navigation ---
        function navigateTo(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById(`${pageId}-page`).classList.add('active');
            state.currentPage = pageId;
            window.scrollTo(0, 0);

            const navbar = document.getElementById('navbar');
            if (pageId === 'home') {
                navbar.classList.add('hidden');
            } else {
                navbar.classList.remove('hidden');
            }
        }
        
        // --- Auth Simulation ---
        function toggleAuthMode() {
            state.isLoginMode = !state.isLoginMode;
            const nameFieldContainer = document.getElementById('name-field-container');
            document.getElementById('auth-title').innerText = state.isLoginMode ? 'Welcome Back' : 'Create an Account';
            document.getElementById('auth-button').innerText = state.isLoginMode ? 'Sign In' : 'Sign Up';
            document.getElementById('auth-toggle-text').innerText = state.isLoginMode ? "Don't have an account?" : "Already have an account?";
            document.getElementById('auth-toggle-link').innerText = state.isLoginMode ? 'Sign Up' : 'Sign In';
            document.getElementById('auth-error').innerText = '';

            if (state.isLoginMode) {
                nameFieldContainer.style.display = 'none';
            } else {
                nameFieldContainer.style.display = 'block';
            }
        }

        function handleAuth(event) {
            event.preventDefault();
            
            // --- Sign Up Logic ---
            if (!state.isLoginMode) {
                state.isLoggedIn = true;
                const signupName = document.getElementById('name').value;
                if(signupName) {
                    document.getElementById('fullName').value = signupName;
                }
                navigateTo('profile');
                return; 
            }

            // --- Sign In Logic ---
            state.isLoggedIn = true;
            if (!state.userProfile) { 
                // This case handles a user signing in who hasn't completed their profile
                navigateTo('profile');
            } else {
                document.getElementById('dashboard-username').innerText = state.userProfile.fullName.split(' ')[0];
                navigateTo('dashboard');
            }
        }
        
        function handleSignOut() {
            state.isLoggedIn = false;
            navigateTo('home');
        }

        function saveProfile(event) {
            event.preventDefault();
            state.userProfile = {
                fullName: document.getElementById('fullName').value,
                educationLevel: document.getElementById('educationLevel').value,
                fieldOfStudy: document.getElementById('fieldOfStudy').value,
                interests: document.getElementById('interests').value,
                skills: document.getElementById('skills').value,
                careerAspirations: document.getElementById('careerAspirations').value
            };
            document.getElementById('dashboard-username').innerText = state.userProfile.fullName.split(' ')[0];
            navigateTo('dashboard');
        }

        const sleep = ms => new Promise(resolve => setTimeout(resolve, ms));

        // --- Career Advisor Logic ---

        function startCareerAdvisor(mode) {
            document.getElementById('advisor-choice').classList.add('hidden');
            document.getElementById('advisor-subtitle').innerText = 'Starting your session...';
            
            state.advisorConversationState.step = 0;
            state.advisorConversationState.answers = [];
            document.getElementById('rec-results').innerHTML = '';


            if (mode === 'chat') {
                const chatView = document.getElementById('advisor-chat-view');
                chatView.classList.remove('hidden');
                document.getElementById('advisor-subtitle').innerText = 'You are now in a chat session with the AI Career Advisor.';
                
                const chatBox = document.getElementById('advisor-chat-box');
                chatBox.innerHTML = '';
                addAdvisorChatMessage("advisor", "Hello! Let's find your ideal career path. First, could you please upload your resume so I can get a sense of your background?", true);
            
            } else if (mode === 'audio') {
                document.getElementById('advisor-audio-view').classList.remove('hidden');
                document.getElementById('advisor-subtitle').innerText = 'Connected via Audio.';
            } else if (mode === 'video') {
                document.getElementById('advisor-video-view').classList.remove('hidden');
                document.getElementById('advisor-subtitle').innerText = 'Connected via Video.';
            }
        }

        function endCareerAdvisorSession() {
            document.getElementById('advisor-chat-view').classList.add('hidden');
            document.getElementById('advisor-audio-view').classList.add('hidden');
            document.getElementById('advisor-video-view').classList.add('hidden');
            document.getElementById('rec-loader').classList.add('hidden');
            document.getElementById('rec-results').innerHTML = '';
            document.getElementById('advisor-choice').classList.remove('hidden');
            document.getElementById('advisor-subtitle').innerText = 'How would you like to start your advisory session?';
        }

        function addAdvisorChatMessage(sender, text, isUploadPrompt = false) {
            const chatBox = document.getElementById('advisor-chat-box');
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('animate-fade-in');
            
            let messageContent = '';
            if (sender === 'advisor') {
                messageContent = `<div class="flex justify-start"><p class="p-3 bg-gray-200 rounded-lg max-w-md">${text}</p></div>`;
                if(isUploadPrompt) {
                     messageContent += `
                        <div class="flex justify-start mt-2">
                             <button onclick="triggerResumeUpload()" class="bg-indigo-100 text-indigo-700 font-semibold py-2 px-4 rounded-lg hover:bg-indigo-200">
                                Click here to Upload Resume
                            </button>
                        </div>`;
                }
            } else { 
                 messageContent = `<div class="flex justify-end"><p class="p-3 bg-indigo-500 text-white rounded-lg max-w-md">${text}</p></div>`;
            }

            messageDiv.innerHTML = messageContent;
            chatBox.appendChild(messageDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function triggerResumeUpload() {
            document.getElementById('advisor-resume-upload-hidden').click();
        }

        async function handleAdvisorResumeFile(event) {
            const file = event.target.files[0];
            if (!file) return;

            addAdvisorChatMessage('user', `Uploaded ${file.name}`);
            document.getElementById('advisor-chat-input').disabled = true;
            document.getElementById('advisor-chat-send-btn').disabled = true;

            await sleep(1500); 
            
            const firstQuestion = state.advisorConversationState.questions[0];
            addAdvisorChatMessage('advisor', firstQuestion);
            state.advisorConversationState.step++;
            
            document.getElementById('advisor-chat-input').disabled = false;
            document.getElementById('advisor-chat-send-btn').disabled = false;
            document.getElementById('advisor-chat-input').focus();
        }

        async function handleAdvisorConversation(event) {
            event.preventDefault();
            const input = document.getElementById('advisor-chat-input');
            const userText = input.value.trim();
            if (!userText) return;
            
            addAdvisorChatMessage('user', userText);
            state.advisorConversationState.answers.push(userText);
            input.value = '';

            const currentStep = state.advisorConversationState.step;
            const questions = state.advisorConversationState.questions;

            if (currentStep < questions.length) {
                const nextQuestion = questions[currentStep];
                addAdvisorChatMessage('advisor', nextQuestion);
                state.advisorConversationState.step++;
            }
            
            if (currentStep === questions.length - 1) {
                document.getElementById('advisor-chat-input').disabled = true;
                document.getElementById('advisor-chat-send-btn').disabled = true;
                await getRecommendations();
            }
        }

        async function getRecommendations() {
            const loader = document.getElementById('rec-loader');
            const resultsContainer = document.getElementById('rec-results');

            loader.style.display = 'flex';
            resultsContainer.innerHTML = '';
            
            await sleep(2500);

            const mockApiResponse = [
                {
                    "title": "AI/ML Engineer",
                    "short_description": "Based on your passion for problem-solving and interest in learning Python, this role is a strong match. It aligns with your technical background and desire to work on cutting-edge technology.",
                },
                {
                    "title": "Full-Stack Developer",
                    "short_description": "This path directly matches your stated aspiration and skills from your resume. Your focus on work-life balance is achievable in many product-based companies in this role.",
                },
                {
                    "title": "DevOps Engineer",
                    "short_description": "Considering your interest in scalable applications and learning new technical skills, DevOps is a high-demand field that bridges development and operations, offering excellent career growth.",
                }
            ];

             resultsContainer.innerHTML += `<h2 class="text-xl font-semibold text-center mb-4">Here are your personalized recommendations:</h2>`;
             mockApiResponse.forEach(rec => {
                resultsContainer.innerHTML += `
                    <div class="bg-white p-6 rounded-2xl shadow-lg animate-fade-in">
                        <h2 class="text-2xl font-bold text-indigo-700">${rec.title}</h2>
                        <p class="mt-2 text-gray-600">${rec.short_description}</p>
                    </div>
                `;
            });
            
            loader.style.display = 'none';
        }

        // --- Other Page Logic (Resume Tracker, AI Mentor) ---
        // ... Functions for Resume Tracker and AI Mentor remain the same ...
        // Initialize with mock profile for demo purposes
        document.addEventListener('DOMContentLoaded', () => {
             state.userProfile = {
                fullName: 'Karthik Uppalapati',
                //...
            };
        });

    </script>
</body>
</html>

